{% if uuid is not empty %}
    {% set item = createModel('JobsRegistry').findById(uuid) %}
{% endif %}
{% set job = service('queue').create(item.name) %}

{% component 'system:admin.panel' %}   
    {% set size = 'min-w-1/2' %}
    <div class="mt-2">
        <table class="{{ theme.table.details }}">
            <thead>
                <tr>
                    <th class="two wide"></th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="{{ theme.table.field.label }}">{{ labels.id }}</td>
                    <td>{{ item.uuid }}</td>
                </tr>
                <tr>
                    <td class="{{ theme.table.field.label }}">{{ labels.name }}</td>
                    <td>
                        {{ item.name }}
                    </td>
                </tr>
                <tr>
                    <td class="{{ theme.table.field.label }}">{{ labels.title }}</td>
                    <td>
                        {{ job.descriptor().getValue('title')|default(item.name) }}
                    </td>
                </tr>
                <tr>
                    <td class="{{ theme.table.field.label }}">{{ labels.description }}</td>
                    <td>
                        {{ job.descriptor().getValue('description')|default(item.name) }}
                    </td>
                </tr>                 
                <tr>
                    <td class="{{ theme.table.field.label }}">{{ labels.priority }}</td>
                    <td>
                        {{ job.getPriority() }}
                    </td>
                </tr>
                <tr>
                    <td class="{{ theme.table.field.label }}">{{ labels.date }}</td>
                    <td>
                        {{ item.date_created|dateTimeFormat }}
                    </td>
                </tr>
                <tr>
                    <td class="{{ theme.table.field.label }}">{{ labels.handler }}</td>
                    <td>
                        {{ item.handler_class }}
                    </td>
                </tr>
                {% if item.package_name is not empty %}  
                    <tr>
                        <td class="{{ theme.table.field.label }}">{{ labels.package }}</td>
                        <td>
                            <div class="ui basic horizontal label">
                                {{ item.package_name }}
                                <div class="detail">{{ item.package_type }}</div>           
                            </div>                        
                        </td>
                    </tr>                                                
                {% endif %}                
            </tbody>  
        </table>  
        <h4 class="my-2 font-bold">
            {{ labels.properties }}
        </h4>   
        {{  component('system:admin.properties.details',{ 
                properties: job.descriptor().collection('parameters') 
            }) 
        }}   
        {% if item.options is iterable %}
        <h4 class="my-2 font-bold">
            {{ labels.values }}
        </h4> 
        {{  component('system:admin.options',{ 
                options: item.options, 
                hide_title: true 
            }) 
        }}                             
        {% endif %}      
        <h4 class="my-2 font-bold">
            {{ labels.result }}
        </h4>   
        {{  component('system:admin.properties.details',{ 
                properties: job.descriptor().collection('result') 
            }) 
        }}    
    </div>
{% endcomponent %}